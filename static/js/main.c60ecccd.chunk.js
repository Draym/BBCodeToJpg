(this["webpackJsonpbbcode-to-jpg"]=this["webpackJsonpbbcode-to-jpg"]||[]).push([[0],{31:function(e,t,a){e.exports=a(78)},36:function(e,t,a){},37:function(e,t,a){},71:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(27),i=a.n(o),r=(a(36),a(37),a(11)),c=a(12),s=a(15),m=a(13),u=a(4),d=a(16),g=a(80),h=a(81),v=a(82),f=a(9),b=a.n(f),y=a(28),C=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"toReact",value:function(){var e={align:this.params.align||null};return l.a.createElement("div",{className:e.align},this.getComponents())}}]),t}(f.Tag),p={getKeys:function(){return{"[":"#y-u-y-u#","]":"#a-s-a-s#"}},correctBBCode:function(e){return e.replace(/\[\[(.*)]]/g,this.getKeys()["["]+"[$1]"+this.getKeys()["]"])},correctFinalString:function(e){var t=this.getKeys();for(var a in t)console.log(t[a],a),e=e.replace(new RegExp(t[a],"g"),a);return e},convertToHtml:function(e){b.a.registerTag("align",C),e=this.correctBBCode(e);var t=Object(y.renderToString)(b.a.toReact(e));return this.correctFinalString(t)}},E=a(29),w={base:"/* Custom */\n    body {\n    }\n    \n    /* Default styling */\n    html, body, div, canvas {\n      margin: 0;\n      padding: 0;\n    }\n    .center {\n    margin: auto;\n    text-align: center;\n    }\n    .left {\n    float: left;\n    text-align: center;\n    }\n    .right {\n    float: right;\n    text-align: center;\n    }",ogame:"body {\n    background-color: #102131;\n    color: #ffffff;\n    font-family: Arial, Helvetica, sans-serif;\n    line-height: 1.28;}"},S={addStyling:function(e,t,a){var n=e.replace(/(?:\r\n|\r|\n)/g,"<br/>"),l=w.base;return"custom"===t?l+="\n"+a:t&&""!==t&&w[t]&&(l+="\n"+w[t]),"\n<head>\n<style>\n{{style}}\n</style>\n<title>bbcode2html</title>\n</head>\n<body>\n{{value}}\n</body>\n".replace("{{style}}",l).replace("{{value}}",n)},getBaseStyle:function(){return w.base},convertToJpg:function(e){return e.toDataURL("image/jpg")},createCanvasPreview:function(e,t,a,n){var l=this.generatePreviewCanvas(e,t),o=l.getContext("2d");o.clearRect(0,0,l.width,l.height),console.log(a),E.drawHTML(a).then((function(e){l.width=e.image.width,l.height=e.image.height,console.log(e.image.width,e.image.height),o.drawImage(e.image,0,0),n(!0)}))},generatePreviewCanvas:function(e,t){var a=document.createElement("canvas");for(a.id=t;e.firstChild;)e.removeChild(e.firstChild);return e.appendChild(a),a},generateDownloadImage:function(e,t){var a=S.convertToJpg(e),n=document.createElement("a");n.download=t,n.href=a,document.body.appendChild(n),n.click(),document.body.removeChild(n)}},B=S,j=a(5),O=(a(70),a(71),a(30)),k=a.n(O),I=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).canvasId="jpgPreview",a.fileName="bbcode2img.jpg",a.state={value:"",config:"",customStyle:B.getBaseStyle(),imageReady:!1},a.handleSubmit=a.handleSubmit.bind(Object(u.a)(a)),a.handleBBCodeChange=a.handleBBCodeChange.bind(Object(u.a)(a)),a.handleConfigChange=a.handleConfigChange.bind(Object(u.a)(a)),a.handleCustomStyleChange=a.handleCustomStyleChange.bind(Object(u.a)(a)),a.createDownloadImage=a.createDownloadImage.bind(Object(u.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleBBCodeChange",value:function(e){this.setState({bbcode:e.target.value})}},{key:"handleConfigChange",value:function(e){this.setState({config:e.target.value})}},{key:"handleCustomStyleChange",value:function(e){this.setState({customStyle:e.target.value})}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),"custom"===this.state.config&&this.state.customStyle.indexOf("<script")>=0)document.getElementById("customStyleArea").classList.add("textAreaError");else{document.getElementById("customStyleArea").classList.remove("textAreaError");var t=p.convertToHtml(this.state.bbcode),a=B.addStyling(t,this.state.config,this.state.customStyle);this.setState({htmlPreview:a}),this.createHtmlPreview(a)}}},{key:"createHtmlPreview",value:function(e){var t=document.getElementById("react-tabs-3");B.createCanvasPreview(t,this.canvasId,e,function(e){this.setState({imageReady:e})}.bind(this))}},{key:"createDownloadImage",value:function(){var e=document.getElementById(this.canvasId);B.generateDownloadImage(e,this.fileName)}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(g.a,null,l.a.createElement(h.a,null,l.a.createElement("h1",{className:"center title"},"BBCode 2 Jpeg")),l.a.createElement(h.a,null,l.a.createElement(v.a,null,l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("label",{className:"form-bbcode"},l.a.createElement("span",null,"BBCode:"),l.a.createElement("textarea",{value:this.state.bbcode,onChange:this.handleBBCodeChange})),l.a.createElement("label",{className:"form-conf"},l.a.createElement("span",null,"Add configuration:"),l.a.createElement("select",{className:"form-control",value:this.state.config,onChange:this.handleConfigChange},l.a.createElement("option",{value:""},"none"),l.a.createElement("option",{value:"ogame"},"Forum"),l.a.createElement("option",{value:"custom"},"custom"))),l.a.createElement("label",{className:"form-customConf ".concat("custom"===this.state.config?null:"hidden")},"Custom configuration:",l.a.createElement("textarea",{id:"customStyleArea",value:this.state.customStyle,onChange:this.handleCustomStyleChange})),l.a.createElement("input",{className:"form-submit btn btn-secondary",type:"submit",value:"Generate Jpeg",disabled:!this.state.bbcode}))),l.a.createElement(v.a,null,l.a.createElement(h.a,null,l.a.createElement(v.a,null,l.a.createElement(j.d,{className:"previewTab"},l.a.createElement(j.b,null,l.a.createElement(j.a,null,"HTML"),l.a.createElement(j.a,null,"Jpeg preview")),l.a.createElement(j.c,null,l.a.createElement("textarea",{className:"previewHtml",value:this.state.htmlPreview,readOnly:!0})),l.a.createElement(j.c,null))),l.a.createElement(v.a,null,l.a.createElement(k.a,{variant:"secondary",className:"float-right",type:"button",style:{visibility:this.state.imageReady?"visible":"hidden"},onClick:this.createDownloadImage},"Download image")))))))}}]),t}(l.a.Component);var N=function(){return l.a.createElement("div",{className:"App-container"},l.a.createElement(I,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(77);i.a.render(l.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[31,1,2]]]);
//# sourceMappingURL=main.c60ecccd.chunk.js.map